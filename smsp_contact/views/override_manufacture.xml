<odoo>
  <data>
    <record model="ir.ui.view" id="override_manufacture">
      <field name="name">override.manufacture</field>
      <field name="model">mrp.production</field>
      <field name="inherit_id" ref="mrp.mrp_production_form_view" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='analytic_account_id']" position="after">
          <field name="over_quantity" string="Over Quantity?"/>
        </xpath>

        <xpath expr="//button[@name='button_mark_done'][@string='Mark as Done'][1]" position="attributes">
          <attribute name="attrs">invisible': [                         '|','|',                         ('move_raw_ids', '=', []),('over_quantity', '!=', False),                         '&amp;',                         '|',                         ('state', 'not in', ('confirmed', 'progress')),                         ('qty_producing', '!=', 0),                         ('state', '!=', 'to_close')]}</attribute>

          <button name="button_mark_done" string="Validate" type="object" class="oe_highlight" confirm="There are no components to consume. Are you still sure you want to continue?" data-hotkey="g"/>
          <button name="button_mark_done" string="Validate" type="object" class="oe_highlight" data-hotkey="g"/>
          <button name="button_mark_done" attrs="{'invisible': [                         '|',                         ('move_raw_ids', '=', []),                         '&amp;',                         '|',                         ('state', 'not in', ('confirmed', 'progress')),                         ('qty_producing', '!=', 0),                         ('state', '!=', 'to_close')]}" string="Mark as Done" type="object" class="oe_highlight" data-hotkey="g"/>
          <button name="button_mark_done" attrs="{'invisible': [                         '|',                         ('move_raw_ids', '!=', []),                         '&amp;',                         '|',                         ('state', 'not in', ('confirmed', 'progress')),                         ('qty_producing', '!=', 0),                         ('state', '!=', 'to_close')]}" string="Mark as Done" type="object" class="oe_highlight" data-hotkey="g" confirm="There are no components to consume. Are you still sure you want to continue?"/>
        </xpath>

        <xpath expr="//button[@name='button_mark_done'][@string='Mark as Done'][2]" position="attributes">
          <attribute name="attrs">{'invisible': [                         '|','|',                         ('move_raw_ids', '!=', []),('over_quantity', '!=', False),                         '&amp;',                         '|',                         ('state', 'not in', ('confirmed', 'progress')),                         ('qty_producing', '!=', 0),                         ('state', '!=', 'to_close')]}</attribute>
        </xpath>
      </field>
    </record>
  </data>
</odoo>
